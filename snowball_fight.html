<html>
<head>
    <link rel="stylesheet" href="./css/style.css">
    <title>Snowball Fight: SANS Holiday Hack 2020</title>
    <script type="text/javascript" src="./scripts/chars.js"></script>
</head>
<body>
<div class="content-surround main-centered">
    <div class="content-background">
        <div id="mainContent" class="content-body">
            <div class="content">
                <!--
                Common - v2020.DEC.23
                -->




                <div class="title">Snowball Fight: SHHC20</div>
                <div class="writeup">
                    <div class="polaroid-rotate-right">
                        <div class="polaroid-surround">
                            <div class="polaroid-frame" onclick="OpenImgModal('img_snowball_fight')">
                                <div class="polaroid-caption">Speaker UNPreparedness Room</div>
                            </div>
                            <div class="polaroid-img-bg"><div id="img_snowball_fight" class="polaroid-img" style="background-image: url('./screenshots/snowball_fight.png');">&nbsp;</div></div>
                        </div>
                    </div>

                    <p>In the <a href="./speaker_unpreparedness_room.html" class="place">Speaker Unpreparedness Room</a> is <span class="char" onclick="OpenCharModal('tangle_coalbox')">Tangle Coalbox</span> who asks for help in determining how folks are beating the Snowball Fight game in impossible mode.</p>

                    <div class="polaroid-rotate">
                        <div class="polaroid-surround">
                            <div class="polaroid-frame" onclick="OpenImgModal('img_snowball_fight_1')">
                                <div class="polaroid-caption">Snowball Fight</div>
                            </div>
                            <div class="polaroid-img-bg"><div id="img_snowball_fight_1" class="polaroid-img" style="background-image: url('./screenshots/snowball_fight_1.png');">&nbsp;</div></div>
                        </div>
                    </div>
                    <p>Opening the modal shows the game where you can choose your player name on easy and medium, but not on hard or impossible.</p>
                </div>

                <div class="writeup">

                    <div class="polaroid-rotate-right">
                        <div class="polaroid-surround">
                            <div class="polaroid-frame" onclick="OpenImgModal('img_snowball_fight_2')">
                                <div class="polaroid-caption">Same Layout</div>
                            </div>
                            <div class="polaroid-img-bg"><div id="img_snowball_fight_2" class="polaroid-img" style="background-image: url('./screenshots/snowball_fight_2.png');">&nbsp;</div></div>
                        </div>
                    </div>
                    <p>In easy and medium mode, if the same username is used, the player and opponent's layout is the same.  So the player name is used to seed the layouts.</p>
                </div>

                <div class="writeup">
                    <div class="polaroid-rotate">
                        <div class="polaroid-surround">
                            <div class="polaroid-frame" onclick="OpenImgModal('img_snowball_fight_3')">
                                <div class="polaroid-caption">Not-so-Random</div>
                            </div>
                            <div class="polaroid-img-bg"><div id="img_snowball_fight_3" class="polaroid-img" style="background-image: url('./screenshots/snowball_fight_3.png');">&nbsp;</div></div>
                        </div>
                    </div>
                    <p>Watching how the game modal was launched using Chrome Dev Tools, I saw that when the page <span class="question cmd-sur">https://snowball2.kringlecastle.com/game</span> is loaded in impossible mode, hidden in the HTML is the previous 624 random values used for the player name, which then generates the layout.</p>
                </div>

                <div class="writeup">
                    <div class="polaroid-rotate-right">
                        <div class="polaroid-surround">
                            <div class="polaroid-frame" onclick="OpenImgModal('img_snowball_fight_4')">
                                <div class="polaroid-caption">Hammer Code</div>
                            </div>
                            <div class="polaroid-img-bg"><div id="img_snowball_fight_4" class="polaroid-img" style="background-image: url('./screenshots/snowball_fight_4.png');">&nbsp;</div></div>
                        </div>
                    </div>
                    <p>Using the mt19937.py script available from <span class="question cmd-sur">https://github.com/tliston/mt19937/blob/main/mt19937.py</span>, I hammer coded it to give me the next number that is available <a href="./mt19937_hack.py">here</a>.</p>
                    <p>So what I did was to launch a game in impossible mode, copy all 624 seeds and dumped into a log file fed into the hacked script to generate the next value in the sequence.</p>
                </div>

                <div class="writeup">
                    <div class="polaroid-rotate">
                        <div class="polaroid-surround">
                            <div class="polaroid-frame" onclick="OpenImgModal('img_snowball_fight_5')">
                                <div class="polaroid-caption">Doppleganger</div>
                            </div>
                            <div class="polaroid-img-bg"><div id="img_snowball_fight_5" class="polaroid-img" style="background-image: url('./screenshots/snowball_fight_5.png');">&nbsp;</div></div>
                        </div>
                    </div>
                    <p>Opening another browser window in parallel, I opened the snowball fight game and started an easy game with the same player name as the next number.  This showed the layout to be the same!</p>
                    <p>I played the game in easy mode to figure out the opponent's layout, then used that information to win the game in impossible mode.</p>
                </div>

                <div class="writeup">
                    <div class="polaroid-rotate-right">
                        <div class="polaroid-surround">
                            <div class="polaroid-frame" onclick="OpenImgModal('img_snowball_fight_6')">
                                <div class="polaroid-caption">Too Easy</div>
                            </div>
                            <div class="polaroid-img-bg"><div id="img_snowball_fight_6" class="polaroid-img" style="background-image: url('./screenshots/snowball_fight_6.png');">&nbsp;</div></div>
                        </div>
                    </div>
                    <p>I played the game in easy mode to figure out the opponent's layout, then used that information to play the game.</p>
                </div>


                <div class="writeup">
                    <div class="polaroid-rotate">
                        <div class="polaroid-surround">
                            <div class="polaroid-frame" onclick="OpenImgModal('img_snowball_fight_7')">
                                <div class="polaroid-caption">Cheating?</div>
                            </div>
                            <div class="polaroid-img-bg"><div id="img_snowball_fight_7" class="polaroid-img" style="background-image: url('./screenshots/snowball_fight_7.png');">&nbsp;</div></div>
                        </div>
                    </div>
                    <p>Knowing the opponents layout in a battleship clone is a surefire way to win (unless you're my 5-year-old son, who still hasn't figured out how to use that knowledge.... *sigh).</p>
                </div>





                <div class="writeup">
                    <p>An overview of all people, places, and events can be learned in the <a href="./index.html" class="link">Introduction</a>.</p>
                </div>





                <!--
                Common - v2020.DEC.23
                -->
            </div>
            <div class="footer" style="">
                <span class="footer-text">
                    <a href="./index.html">Find Other Scrolls</a> | <a href="mailto:jeremy@uranusbytes.com">jeremy@uranusbytes.com</a> | <a href="./credits.html">Credits</a>
                </span>
            </div>
        </div>
    </div>
</div>

<div id="ImgModalDiv" class="modal2">
    <span id="ImgModalClose" class="modal-close" onclick="CloseImgModal();">&times;</span>
    <div class="polaroid-big-rotate">
        <div class="polaroid-big-surround">
            <img id="ModalImg" src="./images/blank.png" class="polaroid-big" />
        </div>
    </div>
</div>


<div id="CharModalDiv" class="modal">
    <span id="CharModalClose" class="modal-close" onclick="CloseCharModal();">&times;</span>
    <div class="char-container">
        <div class="char-child" style="flex-grow: 1; overflow: hidden;">
            <div id="CharName" class="char-name">Jingle</div>
            <img id="CharAvatar" class="char-avatar" src="./images/blank.png">
        </div>
        <div class="char-child" style="flex-grow: 1;">
            <div class="char-name">Dialog</div>
            <div id="CharDialog" class="char-dialog"></div>
        </div>
    </div>
</div>

</body>
</html>
